<page-main>

  <navigation routes={ content.routes } active={ route.name } />

  <elem-intro
    intros="{ content.gallery }"
    edit-mode="{ false }"
    get-value={ getValue }
    on-edit={ handleEdit }
    on-upload={ handleUpload }
    class="h:600px mxw:100pc c:white"
    default-style="{ false }" >

      <div
        each="{ album, key in opts.intros }"
        style="background: linear-gradient( rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3) ), url('{ album.img }'); width: { screenWidth }px;"
        class="dp:flx ai:c h:100pc bg-sz:cv bg-ps:50pc fux-fadeIn fux-fadeOut fl:l ps:rl">

          <div>
            <elem-text
              class="fs:200pc fw:100 lh:1 m:20px-0 ff:Raleway"
              text={ album.title }
              cb-extras={ parent.opts.getValue('gallery.' + key + '.title', 'id') }
              on-edit={ parent.opts.onEdit } />

            <elem-text
              if={ album.description }
              class="fw:500"
              text={ album.description }
              cb-extras={ parent.opts.getValue('gallery.' + key + '.description', 'id') }
              on-edit={ parent.opts.onEdit } />

            <a if={ album.button }
              href="/{parent.opts.getValue('gallery.'+key+'.button.route')}"
              class="p:17px-40px bg:prim c:white br:1px fw:600 fux-boxsh m-t:40px">
                { album.button.title }
            </a>

          </div>

          <div class="ps:ab r,t:0">
            <label class="fu-camera p:10px c:white dp:ib crs:pt">
              <input
                class="op:0 ps:ab w,h:0 dp:n"
                type="file"
                name="files"
                onchange={parent.opts.onUpload.bind(this, parent.opts.getValue('gallery.'+key+'.img', 'id'))} />
            </label>
          </div>

      </div>

  </elem-intro>

  <h1>{ getValue('meta.title') } { getValue('routes.sub.title') }</h1>

  <elem-text
    class="fs:140pc fw:600"
    text={ getValue('routes.sub.meta.description') }
    cb-extras={ getValue('routes.sub.meta.description', 'id') }
    on-edit={ handleEdit } />

  <elem-text
    max={5000}
    text={ getValue('text2') }
    cb-extras={ getValue('text2', 'id') }
    on-edit={ handleEdit } />

  <wrap-test>
    <h1>{ message }</h1>
  </wrap-test>

  <elem-test text={ getValue('text2') } title={ getValue('routes.sub.title') }>
    <h1>{opts.title}</h1>
    <p>{opts.text}</p>
  </elem-test>

  <div class="w:100pc ps:rl m-tb:30px" each={album in getValue('gallery')}>
    <img class="dp:bk w:100pc" src={ getValue('gallery.'+album+'.img') } />
    <span class="ps:ab b,l:0 w:100pc c:white bg:blacka5 fs:80pc p:20px-30px ta:l">
      <elem-text
        class="fs:150pc fw:300 m-b:10px lh:1.1"
        text={ getValue('gallery.'+album+'.title') }
        cb-extras={ getValue('gallery.'+album+'.title', 'id') }
        on-edit={ handleEdit } />
      <elem-text
        class="fs:110pc fw:500"
        text={ getValue('gallery.'+album+'.description') }
        cb-extras={ getValue('gallery.'+album+'.description', 'id') }
        on-edit={ handleEdit } />
    </span>
    <div class="ps:ab r,b:0">
      <label class="fu-camera p:10px c:white dp:ib crs:pt">
        <input
          class="op:0 ps:ab w,h:0"
          type="file"
          name="files"
          onchange={parent.handleUpload.bind(this, getValue('gallery.'+album+'.img', 'id'))} />
      </label>
    </div>
  </div>

    <script>
      this.mixin('store');
    </script>

</page-main>
