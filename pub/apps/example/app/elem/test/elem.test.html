<elem-test>
  <div class="p:20px bg:white bs:1">
    {opts.text}
    <yield />
  </div>
  <div class="p:10px-30px_button mnw:150px_button c:white_button bs:2_button ts:bs_button">
    <button class="bg:prim hv-bs:3" onclick={handleChangeText}>click me to change text</button>
    <button class="bg:sec hv-bs:3" onclick={handleUpdateParent}>update parent</button>
  </div>

  <script>

    opts.text = opts.text || 'default text';

    this.handleChangeText = (e) => {
      this.update({ text: 'text changed'});
      e.preventUpdate = true;
    }

    this.handleUpdateParent = (e) => {
      this.parent.update();
      e.preventUpdate = true;
    }

    this.shouldUpdate = (data, nextOpts) => {
      //console.log('elem-test shouldUpdate data:', data, 'nextOpts:', nextOpts);
      return true;
    }

    this.on('update', (data) => {
      if(this.text)
        this.opts.text = this.text;
      //console.log('elem-test update opts:', this.opts);
    });
  </script>
</elem-test>
